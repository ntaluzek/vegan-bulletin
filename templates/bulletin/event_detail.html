{% extends 'base.html' %}

{% block title %}{{ event.title }} - {{ CITY_NAME }} Vegan Bulletin{% endblock %}

{% block content %}
<nav class="breadcrumb" aria-label="breadcrumbs">
    <ul>
        <li><a href="{% url 'bulletin:home' %}">Home</a></li>
        <li><a href="{% url 'bulletin:event_list' %}">Events</a></li>
        <li class="is-active"><a href="#" aria-current="page">{{ event.title|truncatewords:5 }}</a></li>
    </ul>
</nav>

<div class="box">
    <h1 class="title">{{ event.title }}</h1>

    <div class="columns">
        <div class="column is-two-thirds">
            <!-- Images -->
            {% if event.images.all %}
            <div class="columns is-multiline mb-4">
                {% for image in event.images.all %}
                <div class="column is-half">
                    <figure class="image">
                        <img src="{{ image.image.url }}" alt="{{ image.alt_text }}">
                        {% if image.caption %}
                        <figcaption class="has-text-centered is-size-7 mt-2">{{ image.caption }}</figcaption>
                        {% endif %}
                    </figure>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Description -->
            <div class="content">
                <h2 class="title is-5">About This Event</h2>
                {{ event.description|linebreaks }}
            </div>
        </div>

        <div class="column is-one-third">
            <div class="box">
                <h2 class="title is-5">Event Details</h2>

                <div class="content">
                    <p>
                        <strong><span class="icon"><i class="fas fa-calendar-day"></i></span> Date:</strong><br>
                        {% if event.is_multiday %}
                            {{ event.start_date|date:"F d" }} - {{ event.end_date|date:"F d, Y" }}
                        {% else %}
                            {{ event.start_date|date:"F d, Y" }}
                        {% endif %}
                    </p>

                    {% if event.start_time %}
                    <p>
                        <strong><span class="icon"><i class="fas fa-clock"></i></span> Time:</strong><br>
                        {{ event.start_time|time:"g:i A" }}
                        {% if event.end_time %} - {{ event.end_time|time:"g:i A" }}{% endif %}
                    </p>
                    {% endif %}

                    {% if event.venue_name %}
                    <p>
                        <strong><span class="icon"><i class="fas fa-map-marker-alt"></i></span> Venue:</strong><br>
                        {{ event.venue_name }}
                    </p>
                    {% endif %}

                    <p>
                        <strong><span class="icon"><i class="fas fa-map"></i></span> Address:</strong><br>
                        {{ event.address }}<br>
                        {{ event.city }}, {{ event.state }} {{ event.zip_code }}
                    </p>

                    {% if event.cost %}
                    <p>
                        <strong><span class="icon"><i class="fas fa-dollar-sign"></i></span> Cost:</strong><br>
                        {{ event.cost }}
                    </p>
                    {% endif %}

                    {% if event.organization %}
                    <p>
                        <strong><span class="icon"><i class="fas fa-building"></i></span> Hosted by:</strong><br>
                        {{ event.organization.name }}
                    </p>
                    {% endif %}
                </div>

                {% if event.registration_url %}
                <a href="{{ event.registration_url }}" target="_blank" class="button is-success is-fullwidth mb-2">
                    <span class="icon"><i class="fas fa-ticket-alt"></i></span>
                    <span>Register / Get Tickets</span>
                </a>
                {% endif %}

                {% if event.website %}
                <a href="{{ event.website }}" target="_blank" class="button is-link is-fullwidth">
                    <span class="icon"><i class="fas fa-external-link-alt"></i></span>
                    <span>Event Website</span>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<a href="{% url 'bulletin:event_list' %}" class="button is-link">
    <span class="icon"><i class="fas fa-arrow-left"></i></span>
    <span>Back to Events</span>
</a>
{% endblock %}
